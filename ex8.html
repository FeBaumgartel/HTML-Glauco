<html>
    <head>
        <title>ex8</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="base.css">
        <!--5. Faça um programa que leia uma data, passe para uma função que reajuste esta data em cinco dias. -->
    </head>
    <body>
        <p>Digite a data: <input type="text" class="texto" id="d">
        /<input type="text" class="texto" id="m">
        /<input type="text" class="texto" id="a">
        <br></p>
        <input type="submit" id="botao" value="Enviar">

        <style>
            .texto{
                width: 40px;
            }
        </style>
        <script>
            function mostraMensagem(){
                var dia = parseFloat(document.getElementById('d').value);
                var mes = parseFloat(document.getElementById('m').value);
                var ano = parseFloat(document.getElementById('a').value);
                if(ver(dia,mes,ano)==1){
                    calc_data(dia,mes,ano)
                }else{
                    alert("Data inválida");
                }
            }
            function ver(d,m,a){
                if(m>12 || m<1){
                    return 0;
                }
                    
                if(d<1){
                    return 0;
                }
                    
                if(a<1){
                    return 0;
                }
                    
                if(m%2==1){
                    if(d<=31){
                        return 1;
                    }else
                        return 0;
                }else{
                    if(m==2){
                        if(a % 4 == 0 && (a % 400 == 0 || a % 100 != 0)){
                            if(d<=29){
                                return 1;
                            }else
                                return 0;
                        }else{
                            if(d<=28){
                                return 1;
                            }else
                                return 0;
                        }
                    }else{
                        if(d<=30){
                            return 1;
                        }else
                            return 0;
                    }
                }
                return 0;
            }

            function calc_data(d,m,a){
                d+=5;
                if(m%2==1){
                    if(d>31){
                        d-=31;
                        m++;
                    }
                }else{
                    if(m==2){
                        if(a % 4 == 0 && (a % 400 == 0 || a % 100 != 0)){
                            if(d>29){
                                d-=29;
                                m=3;
                            }
                        }else{
                            if(d>28){
                                d-=28;
                                m=3;
                            }
                        }
                    }else{
                        if(m==12){
                            if(d>30){
                                d-=30;
                                m=1;
                            }
                        }else{
                            if(d>30){
                                d-=30;
                                m++;
                            }
                        }
                    }
                }
                alert(d+"/"+m+"/"+a);
            }
            document.getElementById("botao").onclick = function(e) {
                mostraMensagem();
                e.preventDefault();
            }
        </script>
    </body>
</html>